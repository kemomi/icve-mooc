(function(l){var e=$("#templateType",top.document).val();var j=["video"];var p=["video_video","video_image","audio"].concat(j);var c="";var m=$("#userType").val();var o=$("#autoPlayConfig").val();var a={};var f={"8":{executeActive:b,pickDateActive:h,element:"learnMenu"},"2":{executeActive:b,pickDateActive:h,element:"learnMenu"},"3":{executeActive:b,pickDateActive:h,element:"learnMenu"},"1":{executeActive:i,pickDateActive:k,element:"nav"},mobile:{executeActive:d,pickDateActive:n,element:"cTab_con_2"}};function g(){if(o==="0"||m!=="0"||c!==""){return}if(typeof(f[e])!="undefined"){f[e].pickDateActive.call(this,f[e].element)}}l.exePlayNextNode=function(t){if(o==="0"||m!=="0"){return}var s=a[t];if(s){t=s.nextNodeId}q(t)};l.playFirstNode=function(){if(o==="0"||m!=="0"){return}if(c===""){g()}q(c)};l.getPlayLearningVideoNode=function(t){if(o==="0"||m!=="0"){return}if(c===""){g()}var v="";var s=$("div[completestate='1']:last");var u=$("div[completestate='1']").size();if(u===0){s=$(".s_point:first")}if(t.attr("itemtype")!=="video"&&t.attr("itemtype")!=="courseware"&&t.attr("itemtype")!=="audio"){$(s.prevAll().toArray().reverse()).each(function(){if($(this).attr("itemtype")==="video"||$(this).attr("itemtype")==="courseware"||$(this).attr("itemtype")==="audio"){v=$(this).attr("id").replace("s_point_","")}});if(s.attr("itemtype")==="video"||s.attr("itemtype")==="courseware"||s.attr("itemtype")==="audio"){v=s.attr("id").replace("s_point_","")}return v}};l.externalPlayNode=function(s){if(typeof(f[e])!="undefined"){f[e].executeActive.call(this,s)}};function q(s){if(typeof(f[e])!="undefined"){f[e].executeActive.call(this,s)}}function b(v){if(!v||v===""){r();return}var u=a[v];if(typeof(u)=="undefined"||u==null){r();return}var t=u.type;var w=u.itemId;if(p.indexOf(t)===-1){var s=u.nextNodeId;if(typeof(s)=="undefined"||s==null){r();return}b(s);return}var x=$("#s_point_"+w);x.parents(".s_sectionlist").show();x.parents(".s_sectionwrap").show();x.click()}function h(s){var u=$("#"+s).find(".s_point");var t=u.length;if(t>0){c=$(u[0]).attr("id").replace("s_point_","")}u.each(function(z){var A=$(this).attr("itemType");var B=$(this).attr("id").replace("s_point_","");if(A==="courseware"){var x=$(this).data("waretype");if(typeof(x)!="undefined"&&x!==""){A=x}}var y={itemId:B,type:A,nextNodeId:null};var w=z+1;if(t>w){var v=u[w];y.nextNodeId=$(v).attr("id").replace("s_point_","")}a[B]=y})}function k(s){var u=$("#"+s).find("li");var t=u.length;u.each(function(y){var z=$(this).attr("id").replace("childItem_","");var x={itemId:z,type:"section",nextNodeId:null,childrenNode:[]};var w=y+1;if(t>w){var v=u[w];x.nextNodeId=$(v).attr("id").replace("childItem_","")}a[z]=x})}function i(x){var s=$("#nav").find(".select");if(!s||s.length===0){s=$("#nav").find("li[id^='childItem_']:first");s.find("a").click();i()}var t;if(!x||x===""||x==="null"){t=$("#float").find("div[id^='menu']")}else{t=$("#menu_"+x+" ~ div[id^=menu]")}var w="";if(t.length>0){t.each(function(){var z=$(this).attr("id").replace("menu_","");var y=$(this).attr("wareType");if(p.indexOf(y)>-1){w=z;return false}});if(w!==""){$("#menu_"+w).click();return}}if(w===""){var v=$(s).attr("id").replace("childItem_","");var u=a[v].nextNodeId;if(typeof(u)=="undefined"||u==null||u===""){r();return}$("#childItem_"+u).find("a").click();i()}}function d(x){var v=j;if(whatyAPP==="1"){v=p}if(!x||x===""){r();return}var t=a[x];var s=t.type;if(v.indexOf(s)===-1){var u=t.nextNodeId;if(typeof(u)=="undefined"||u==null){r();return}d(u);return}x=t.itemId;var w=$("#grandChildItem_"+x);var y=w.parents("div[id^='chapter']");if(y.is(":hidden")){w.parents(".chapterbox").find("div[id^='chapter']").click()}$("#grandChildItem_"+x).click()}function n(){var t=$("#"+f.mobile.element).find("div[id^='grandChildItem_']");var s=t.length;if(s>0){c=$(t[0]).attr("id").replace("grandChildItem_","")}t.each(function(x){var y=$(this).attr("waretype");var z=$(this).attr("id").replace("grandChildItem_","");var w={itemId:z,type:y,nextNodeId:null};var v=x+1;if(s>v){var u=t[v];w.nextNodeId=$(u).attr("id").replace("grandChildItem_","")}a[z]=w})}g();function r(){if(window.top&&window.top.opener){var s=courseId;if(s.endsWith("___")){s=s.substring(0,s.length-3)}var t={event:"autoPlayFinish",courseId:s};window.top.opener.postMessage(t,"*")}}})(window);