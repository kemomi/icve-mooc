(function(v){var y=true;var A=$("#playOpeningVideo").val();var l=$("#playEndingVideo").val();var i=$("#showVideoSkipButton").val();var p=null;var s=null;var n=$("#templateType",top.document).val();var x=$("#transcodeType").val();var b=false;var w={autostart:true,playbackrates:false,type:"flvlist",primary:jwplayer.utils.isIE()?"flash":"html5",width:720,height:405,controls:false,volume:"100"};var g={onReady:function(){m(this);if(this.container.id==="ending-video-container"){$("#ending-video-component").hide();if(!v.hasOpeningVideo()){$("#video-ad-component-container").hide()}}if(this.container.id==="opening-video-container"){var B=setInterval(function(){var C=document.getElementById("opening-video-container").getElementsByTagName("video")[0];if(C){C.muted=true;clearInterval(B)}},10)}},onPlay:function(){var B=$(this.container).find("video")[0];if(B&&B.muted===true){B.muted=false}$(this.container).parent().find(".oae-topright").show();$(this.container).parent().find(".oae-bottomleft").show();$("#video_bullet_container").hide();$("#video-ad-component-container").show();if(this.container.id==="ending-video-container"){$("#ending-video-component").show()}$(this.container).parent().find(".player-play-state").removeClass("media-play").addClass("media-pause")},onPause:function(){$(this.container).parent().find(".player-play-state").removeClass("media-pause").addClass("media-play")},onTime:function(){var B=this.getDuration();if(B>0){$(this.container).parent().find(".player-duration").text(Math.ceil(B-this.getPosition())+"s")}}};if(n==="2"||n==="3"){w.width="896px";w.height="504px"}if(n==="5"||n==="6"){w.width="810px";w.height="455px";if(x==="0"&&n==="5"){w.width="720px";w.height="405px"}}if(n==="7"){w.width=$(window).width()*0.98+"px";w.height=($(window).width()*0.55)+"px";if(x==="0"){w.height="534px"}}if(n==="4"||n==="8"){w.width=window.innerWidth;w.height=window.innerHeight}if(jwplayer.utils.isMobile()){var e=$(window).width();if(e>1200){e=1200}var z=e*9/16;w.width=e;w.height=z}function h(){var D=$("#adVideoInfo").val();if(D&&D!==""){var G=JSON.parse(D);var H=$("#itemId").val();b=(H===G.breakpointItem&&G.breakpointVideoTime>0);var F=G.openingVideo;var C=G.openingDistribute;if(F&&C===1){p=typeof F==="object"?JSON.stringify(F):F}var B=G.endingVideo;var E=G.endingDistribute;if(B&&E===1){s=typeof B==="object"?JSON.stringify(B):B}}}function q(){$.ajax({type:"POST",data:{"params.courseId":c()},url:_basePath+"/learn/learnCourseware/getVideoSkipBeginEnd.json",cache:false,async:false,dataType:"json",success:function(C){var B=C.data;if(B&&B.success==="true"){isPlayAdVideo=B.skipBeginEndStatus;i=B.showVideoSkipButton}}})}function j(E,D,B){var C=document.getElementById(E);if(C==null){C=document.createElement("link");C.type="text/css";C.id=E;C.rel="stylesheet";C.href=D;document.getElementsByTagName("head")[0].appendChild(C)}if(C.loaded){if(B&&typeof B==="function"){B()}}else{C.addEventListener("load",function(){C.loaded=true;if(B&&typeof B==="function"){B()}})}}function o(D,B){var C='<div>           <div class="oae-topright" style="display: none">               <div class="oae-countdown">                   <span class="player-duration sec"></span>';if(i==="1"){var G=B==="opening"?"片头":"片尾";var E=B==="opening"?"0":"1";C+='          <span class="split"></span>          <a href="javascript:;" class="skip-play-btn link" data-option="'+E+'">跳过'+G+"</a>"}C=C+'               </div>           </div>           <div class="oae-bottomleft" style="display: none">               <div class="btn-group">                   <a href="javascript:;" class="player-play-state oae-media-btn media-pause"><i></i></a>                   <a href="javascript:;" class="player-volume-state oae-media-btn media-vol"><i></i></a>               </div>           </div>       </div>';var F=f(C);document.getElementById(D).appendChild(F)}function m(C){if(!C||!C.container){return}var B=$(C.container).parent();B.find(".player-play-state").on("click",function(){if(C!=null){var D=C.getState();if(D==="PLAYING"){C.pause();$(this).removeClass("media-pause").addClass("media-play")}else{C.play();$(this).removeClass("media-play").addClass("media-pause")}}});B.find(".player-volume-state").on("click",function(){if(C!=null){var D=C.getVolume();if(D>0){C.setVolume(0);$(this).removeClass("media-vol").addClass("media-mute")}else{C.setVolume(60);$(this).removeClass("media-mute").addClass("media-vol")}}});B.find(".skip-play-btn").on("click",function(){if(C!=null){$.ajax({url:_basePath+"/learn/learnCourseware/saveVideoSkipBeginEnd.json",type:"post",data:{"params.courseId":c(),"params.optionType":$(this).data("option"),"params.skipStatus":"0"},dataType:"json",async:true,cache:false,success:function(){if(C.container.id==="opening-video-container"){jwplayer("container").play();$("#video-ad-component-container").hide();$("#opening-video-component").remove()}else{$("#video-ad-component-container").remove()}},error:function(){console.log("跳过片头片尾失败")}})}})}function f(B){var C=document.createElement("div");C.innerHTML=B;return C.childNodes[0]}function c(){return window.courseId.split("___")[0]}function k(B){return typeof B==="object"&&B!==null}var u=Object.assign||function u(E){for(var B=arguments.length,C=new Array(B>1?B-1:0),D=1;D<B;D++){C[D-1]=arguments[D]}if(k(E)&&C.length>0){C.forEach(function(F){if(k(F)){Object.keys(F).forEach(function(G){E[G]=F[G]})}})}return E};function a(E){if(v.hasEndingVideo()){var D=E||"container";o(D,"ending");var C=u({},w);C.file=s;C.autostart=false;var B=u({},g);B.onComplete=function(){jwplayer("ending-video-container").destroyPlayer();jwplayer("ending-video-container").remove();$("#video-ad-component-container").remove();$("#video_bullet_container").show()};$("#video-ad-component-container").show();C.events=B;jwplayer("ending-video-container").setup(C)}else{$("#video_bullet_container").show();$("#ending-video-component").remove();if(!$.trim($("#ad-videos").html())){$("#video-ad-component-container").remove()}}}function d(C){if(v.hasOpeningVideo()){var B=C||"container";o(B,"opening");var D=u({},w);D.file=p;var E=u({},g);E.onComplete=function(){jwplayer("opening-video-container").destroyPlayer();jwplayer("opening-video-container").remove();jwplayer("container").play();if(typeof player!=="undefined"){player.play()}if(typeof aliPlayer!=="undefined"){aliPlayer.play()}$("#video_bullet_container").show();$("#opening-video-component").remove();$("#video-ad-component-container").hide()};D.events=E;$("#video-ad-component-container").show();jwplayer("opening-video-container").setup(D)}else{$("#video_bullet_container").show();$("#opening-video-component").remove()}}v.hasOpeningVideo=function(){return y&&(!b&&p!=null&&(i==="0"||A==="1"))};v.hasEndingVideo=function(){return y&&(s!=null&&(i==="0"||l==="1"))};v.existOpenVideo=function(){return p!=null};v.existEndVideo=function(){return s!=null};v.initAdVideo=function(C,B){d(C);a(B)};v.playEndingAdVideo=function(){$("#video_bullet_container").hide();jwplayer("ending-video-container")&&jwplayer("ending-video-container").play()};v.mobileAdComponent=function(){};mobileAdComponent.initAdVideo=function(){if(v.hasOpeningVideo()||v.hasEndingVideo()){r()}d("opening-video-component");a("ending-video-component")};mobileAdComponent.initAdVideoContainerEle=function(){$("#video-ad-component-container").remove();var B='<div class="video-ad-component" id="video-ad-component-container" style="display: none">   <div id="ad-videos">    <div class="opening-video" id="opening-video-component">     <div id="opening-video-container"></div>    </div>    <div class="ending-video" id="ending-video-component">     <div id="ending-video-container"></div>    </div>   </div>  </div>';$(B).appendTo("body");q();h()};function r(){if(t){$("#video-ad-component-container").appendTo("#container")}else{setTimeout(v.moveAdVideo,50)}}function t(){if(v.hasOpeningVideo()&&!jwplayer("opening-video-container")){return false}if(v.hasEndingVideo&&!jwplayer("opening-video-container")){return false}return jwplayer("container")}h()})(window);