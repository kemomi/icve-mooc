(function(e){var c={initialized:false,globalTopic:"multi-page-event-bus-global-topic"};var d={};function b(g,h){var i={topic:c.globalTopic,event:g,data:h};window.top.postMessage(i,"*")}function a(h,i){var g=d[h];if(g){g.push(i)}else{g=[];g.push(i);d[h]=g}}function f(){if(c.initialized){return}window.addEventListener("message",function(g){var n=g.data;var h=n.topic;var m=n.event;var l=n.data;if(c.globalTopic===h){var o=document.querySelectorAll("iframe");if(o&&o.length>0){for(var j=0;j<o.length;j++){o[j].contentWindow.postMessage(n,"*")}}var k=d[m];if(k&&k.length>0){for(var j=0;j<k.length;j++){k[j](l)}}}});c.initialized=true}f();e.MultiPageEventBus={emit:b,on:a}})(window);